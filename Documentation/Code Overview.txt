This document aims to give any new hire a general overview of the labview code, so that it's easier to find the source of any problems that arise.

TLDR:
Pelletron Controller turns the accelerator on and off. Dust Control Giraffe chooses how fast particles appear. FPGA Controller chooses which particles make it to the end of the accelerator. BigAccDAQ records all incoming particles and (if the user wants) sends them to Database Connection. Database Connection takes a queue of particles from the BigAccDAQ and archives them into .hdf5 files on the server. Database Connection ALSO updates the database with estimates of the speed, charge, mass, and radius of the particle. Batch Processor finds these rough estimates, finds the matching archive files, and updates the database with better estimates of the particle's speed, charge, mass, radius, and quality. Live Plot searches the database for every particle from the most recent experiment and puts them in a plot. Query Dust Event searches backwards through the database and finds any set of particles the user asks for.

The codebase for the big accelerator and small accelerator is almost entirely LabView, with a bit of IDL code for processing waveforms.

The Pelletron Controller (Pelletron\Accelnet\Pelletron_Controller.vi) displays the peak voltage of the big accelerator's pelletron, and controls the big accelerator elements that create the high voltage. Since there is no pelletron on the small accelerator (only a needle), there is no equivalent vi for the small accelerator.

The Dust Control Giraffe (Database2.0\Dust_Control_Giraffe.vi) controls steering, lensing, needle voltage, and needle frequency. The equivalent program on the small accelerator (Database2.0\Small Accelerator\Dust_Control_Giraffe_small.vi) does the same job, but without steering or lensing.

The FPGA Controller (FPGA\FPGAController_v4.vi) controls how sensitive the FPGA is to noise and dust signals. We will occasionally lower the thresholds on this program while the accelerator isn't running just to get some noise signals. Since there is no PSU or FPGA on the small accelerator, there is no small accelerator equivalent.

The BigAccDAQ (Accelerator Measurement\BigAccDAQ.vi) displays the outputs of the oscilloscope connected to the detectors and PSU. It also does a bit of particle selection, allowing only some signals to enter the database. The first two detectors are displayed on the top plot, the PSU is displayed in the middle plot, and the third detector is displayed in the bottom plot. The equivalent for the small accelerator (Database2.0\Small Accelerator\SmallAccDAQ.vi) only displays the first plot, since it has no PSU or third detector. These plots allow us to see the particles as they come off the accelerator. After a while, it becomes very easy to tell by eye whether a particle was good or bad, how fast it was going, and whether it hit the wall or made it into the chamber.

Database Connection (Database2.0\User Interface\Database Connection.vi) plays a large role for both the big accelerator and small accelerator. It automatically detects whether it is running on the small accelerator or not. On the big accelerator, the Pelletron Controller posts a queue of events containing information about the status of the acclerator. Database Connection finds that queue and posts the information to the database. This allows us to state with great certainty the voltage of the pelletron at any particular time. The BigAccDAQ and SmallAccDAQ also post a queues of dust events which contain all measurements from the oscilloscopes and a preliminary assessment of the particle's velocity, mass, charge, etc. Database Connection then reads all of this information off the queue, posts the preliminary assessment of the particle to the database, and writes an hdf5 archive file that contains the waveform information. This is stored on the database server in the X:\ directory. Another job given to Database Connection is programming the FPGA to accept only certain particles. This is done in a sub vi called PSU Settings (Database2.0\Private\UI Elements\PSUSettingsMenu.vi).

The batch processor (Database2.0\Batch Processor\batch processor.vi) searches the database every five seconds for particles that need processing. When Database Connection posts it's preliminary assessment, it also posts that the particle requires processing. The batch processor takes these particles and tells the IDL code (Database2.0\Batch Processor\idl_batch_processor.pro) to process them 100 at a time. If there are less than 10 events that need processing, the batch processor waits another five seconds before processing them.
NOTE: The batch processor can also process old entries, but new events from the accelerator take precedence over old events. The batch processor will stop processing old events until ten minutes after the accelerator stops running.

Query Dust Event (Database2.0\User Interface\Query_Dust_Event_v2.vi) is used to find all old events in the database. These events can be searched and plotted based on a wide range of query conditions. The second tab allows the user to search for and view waveforms using the same query conditions. Once selected, these waveforms appear on the plot, and can be saved separately from the plotted waveforms.

Live Plot (Database2.0\User Interface\Live_Plot.vi) is a "lite" version of Query Dust Event that features a live-updating plot of all the particles in the latest experiment. It also shows the last five waveforms to come off the accelerator.